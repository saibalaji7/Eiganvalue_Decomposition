`timescale 1ns / 1ps

module diagmergecordic(
input  [31:0] a11,a12,a21,a22,
output[31:0] out11,out12,out21,out22,
input LD,clk,clr,
output [31:0] control
);
wire [31:0] a11_0,a11_1,a11_2,a11_3,a11_4,a11_5,a11_6,a11_7,a11_8,a11_9,a11_10,a11_11,a11_12,a11_13,a11_14,a11_15,a11_16;
wire [31:0] a12_0,a12_1,a12_2,a12_3,a12_4,a12_5,a12_6,a12_7,a12_8,a12_9,a12_10,a12_11,a12_12,a12_13,a12_14,a12_15,a12_16;
wire [31:0] a21_0,a21_1,a21_2,a21_3,a21_4,a21_5,a21_6,a21_7,a21_8,a21_9,a21_10,a21_11,a21_12,a21_13,a21_14,a21_15,a21_16;
wire [31:0] a22_0,a22_1,a22_2,a22_3,a22_4,a22_5,a22_6,a22_7,a22_8,a22_9,a22_10,a22_11,a22_12,a22_13,a22_14,a22_15,a22_16;
wire [31:0] b11_0,b11_1,b11_2,b11_3,b11_4,b11_5,b11_6,b11_7,b11_8,b11_9,b11_10,b11_11,b11_12,b11_13,b11_14,b11_15,b11_16;
wire [31:0] b12_0,b12_1,b12_2,b12_3,b12_4,b12_5,b12_6,b12_7,b12_8,b12_9,b12_10,b12_11,b12_12,b12_13,b12_14,b12_15,b12_16;
wire [31:0] b21_0,b21_1,b21_2,b21_3,b21_4,b21_5,b21_6,b21_7,b21_8,b21_9,b21_10,b21_11,b21_12,b21_13,b21_14,b21_15,b21_16;
wire [31:0] b22_0,b22_1,b22_2,b22_3,b22_4,b22_5,b22_6,b22_7,b22_8,b22_9,b22_10,b22_11,b22_12,b22_13,b22_14,b22_15,b22_16;
wire [31:0] s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14,s15,s16;

addsub sub0(a22,a11,1'b1,s0);
xor g0(c0,s0[31],a21[31]);
not g00(nc0,c0);
addsub add0_11(a11,a12,nc0,b11_0);
addsub add0_12(a12,a11,c0,b12_0);
addsub add0_21(a21,a22,nc0,b21_0);
addsub add0_22(a22,a21,c0,b22_0);

addsub adda0_11(b11_0,b21_0,nc0,a11_0);
addsub adda0_12(b21_0,b11_0,c0,a21_0);
addsub adda0_21(b12_0,b22_0,nc0,a12_0);
addsub adda0_22(b22_0,b12_0,c0,a22_0);

addsub sub1(a22_0,a11_0,1'b1,s1);
xor g1(c1,s1[31],a21_0[31]);
not g11(nc1,c1);
addsub add1_11(a11_0,{{1{a12_0[31]}},a12_0[31:1]},nc1,b11_1);
addsub add1_12(a12_0,{{1{a11_0[31]}},a11_0[31:1]},c1,b12_1);
addsub add1_21(a21_0,{{1{a22_0[31]}},a22_0[31:1]},nc1,b21_1);
addsub add1_22(a22_0,{{1{a21_0[31]}},a21_0[31:1]},c1,b22_1);

addsub adda1_11(b11_1,{{1{b21_1[31]}},b21_1[31:1]},nc1,a11_1);
addsub adda1_12(b21_1,{{1{b11_1[31]}},b11_1[31:1]},c1,a21_1);
addsub adda1_21(b12_1,{{1{b22_1[31]}},b22_1[31:1]},nc1,a12_1);
addsub adda1_22(b22_1,{{1{b12_1[31]}},b12_1[31:1]},c1,a22_1);

addsub sub2(a22_1,a11_1,1'b1,s2);
xor g2(c2,s2[31],a21_1[31]);
not g22(nc2,c2);
addsub add2_11(a11_1,{{2{a12_1[31]}},a12_1[31:2]},nc2,b11_2);
addsub add2_12(a12_1,{{2{a11_1[31]}},a11_1[31:2]},c2,b12_2);
addsub add2_21(a21_1,{{2{a22_1[31]}},a22_1[31:2]},nc2,b21_2);
addsub add2_22(a22_1,{{2{a21_1[31]}},a21_1[31:2]},c2,b22_2);

addsub adda2_11(b11_2,{{2{b21_2[31]}},b21_2[31:2]},nc2,a11_2);
addsub adda2_12(b21_2,{{2{b11_2[31]}},b11_2[31:2]},c2,a21_2);
addsub adda2_21(b12_2,{{2{b22_2[31]}},b22_2[31:2]},nc2,a12_2);
addsub adda2_22(b22_2,{{2{b12_2[31]}},b12_2[31:2]},c2,a22_2);

addsub sub3(a22_2,a11_2,1'b1,s3);
xor g3(c3,s3[31],a21_2[31]);
not g33(nc3,c3);
addsub add3_11(a11_2,{{3{a12_2[31]}},a12_2[31:3]},nc3,b11_3);
addsub add3_12(a12_2,{{3{a11_2[31]}},a11_2[31:3]},c3,b12_3);
addsub add3_21(a21_2,{{3{a22_2[31]}},a22_2[31:3]},nc3,b21_3);
addsub add3_22(a22_2,{{3{a21_2[31]}},a21_2[31:3]},c3,b22_3);
addsub adda3_11(b11_3,{{3{b21_3[31]}},b21_3[31:3]},nc3,a11_3);
addsub adda3_12(b21_3,{{3{b11_3[31]}},b11_3[31:3]},c3,a21_3);
addsub adda3_21(b12_3,{{3{b22_3[31]}},b22_3[31:3]},nc3,a12_3);
addsub adda3_22(b22_3,{{3{b12_3[31]}},b12_3[31:3]},c3,a22_3);


addsub sub4(a22_3,a11_3,1'b1,s4);
xor g4(c4,s4[31],a21_3[31]);
not g44(nc4,c4);
addsub add4_11(a11_3,{{4{a12_3[31]}},a12_3[31:4]},nc4,b11_4);
addsub add4_12(a12_3,{{4{a11_3[31]}},a11_3[31:4]},c4,b12_4);
addsub add4_21(a21_3,{{4{a22_3[31]}},a22_3[31:4]},nc4,b21_4);
addsub add4_22(a22_3,{{4{a21_3[31]}},a21_3[31:4]},c4,b22_4);
addsub adda4_11(b11_4,{{4{b21_4[31]}},b21_4[31:4]},nc4,a11_4);
addsub adda4_12(b21_4,{{4{b11_4[31]}},b11_4[31:4]},c4,a21_4);
addsub adda4_21(b12_4,{{4{b22_4[31]}},b22_4[31:4]},nc4,a12_4);
addsub adda4_22(b22_4,{{4{b12_4[31]}},b12_4[31:4]},c4,a22_4);

addsub sub5(a22_4,a11_4,1'b1,s5);
xor g5(c5,s5[31],a21_4[31]);
not g55(nc5,c5);
addsub add5_11(a11_4,{{5{a12_4[31]}},a12_4[31:5]},nc5,b11_5);
addsub add5_12(a12_4,{{5{a11_4[31]}},a11_4[31:5]},c5,b12_5);
addsub add5_21(a21_4,{{5{a22_4[31]}},a22_4[31:5]},nc5,b21_5);
addsub add5_22(a22_4,{{5{a21_4[31]}},a21_4[31:5]},c5,b22_5);
addsub adda5_11(b11_5,{{5{b21_5[31]}},b21_5[31:5]},nc5,a11_5);
addsub adda5_12(b21_5,{{5{b11_5[31]}},b11_5[31:5]},c5,a21_5);
addsub adda5_21(b12_5,{{5{b22_5[31]}},b22_5[31:5]},nc5,a12_5);
addsub adda5_22(b22_5,{{5{b12_5[31]}},b12_5[31:5]},c5,a22_5);



addsub sub6(a22_5,a11_5,1'b1,s6);
xor g6(c6,s6[31],a21_5[31]);
not g66(nc6,c6);
addsub add6_11(a11_5,{{6{a12_5[31]}},a12_5[31:6]},nc6,b11_6);
addsub add6_12(a12_5,{{6{a11_5[31]}},a11_5[31:6]},c6,b12_6);
addsub add6_21(a21_5,{{6{a22_5[31]}},a22_5[31:6]},nc6,b21_6);
addsub add6_22(a22_5,{{6{a21_5[31]}},a21_5[31:6]},c6,b22_6);
addsub adda6_11(b11_6,{{6{b21_6[31]}},b21_6[31:6]},nc6,a11_6);
addsub adda6_12(b21_6,{{6{b11_6[31]}},b11_6[31:6]},c6,a21_6);
addsub adda6_21(b12_6,{{6{b22_6[31]}},b22_6[31:6]},nc6,a12_6);
addsub adda6_22(b22_6,{{6{b12_6[31]}},b12_6[31:6]},c6,a22_6);

addsub sub7(a22_6,a11_6,1'b1,s7);
xor g7(c7,s7[31],a21_6[31]);
not g77(nc7,c7);
addsub add7_11(a11_6,{{7{a12_6[31]}},a12_6[31:7]},nc7,b11_7);
addsub add7_12(a12_6,{{7{a11_6[31]}},a11_6[31:7]},c7,b12_7);
addsub add7_21(a21_6,{{7{a22_6[31]}},a22_6[31:7]},nc7,b21_7);
addsub add7_22(a22_6,{{7{a21_6[31]}},a21_6[31:7]},c7,b22_7);
addsub adda7_11(b11_7,{{7{b21_7[31]}},b21_7[31:7]},nc7,a11_7);
addsub adda7_12(b21_7,{{7{b11_7[31]}},b11_7[31:7]},c7,a21_7);
addsub adda7_21(b12_7,{{7{b22_7[31]}},b22_7[31:7]},nc7,a12_7);
addsub adda7_22(b22_7,{{7{b12_7[31]}},b12_7[31:7]},c7,a22_7);

addsub sub8(a22_7,a11_7,1'b1,s8);
xor g8(c8,s8[31],a21_7[31]);
not g88(nc8,c8);
addsub add8_11(a11_7,{{8{a12_7[31]}},a12_7[31:8]},nc8,b11_8);
addsub add8_12(a12_7,{{8{a11_7[31]}},a11_7[31:8]},c8,b12_8);
addsub add8_21(a21_7,{{8{a22_7[31]}},a22_7[31:8]},nc8,b21_8);
addsub add8_22(a22_7,{{8{a21_7[31]}},a21_7[31:8]},c8,b22_8);
addsub adda8_11(b11_8,{{8{b21_8[31]}},b21_8[31:8]},nc8,a11_8);
addsub adda8_12(b21_8,{{8{b11_8[31]}},b11_8[31:8]},c8,a21_8);
addsub adda8_21(b12_8,{{8{b22_8[31]}},b22_8[31:8]},nc8,a12_8);
addsub adda8_22(b22_8,{{8{b12_8[31]}},b12_8[31:8]},c8,a22_8);

addsub sub9(a22_8,a11_8,1'b1,s9);
xor g9(c9,s9[31],a21_8[31]);
not g99(nc9,c9);
addsub add9_11(a11_8,{{9{a12_8[31]}},a12_8[31:9]},nc9,b11_9);
addsub add9_12(a12_8,{{9{a11_8[31]}},a11_8[31:9]},c9,b12_9);
addsub add9_21(a21_8,{{9{a22_8[31]}},a22_8[31:9]},nc9,b21_9);
addsub add9_22(a22_8,{{9{a21_8[31]}},a21_8[31:9]},c9,b22_9);
addsub adda9_11(b11_9,{{9{b21_9[31]}},b21_9[31:9]},nc9,a11_9);
addsub adda9_12(b21_9,{{9{b11_9[31]}},b11_9[31:9]},c9,a21_9);
addsub adda9_21(b12_9,{{9{b22_9[31]}},b22_9[31:9]},nc9,a12_9);
addsub adda9_22(b22_9,{{9{b12_9[31]}},b12_9[31:9]},c9,a22_9);

addsub sub10(a22_9,a11_9,1'b1,s10);
xor g10(c10,s10[31],a21_9[31]);
not g1010(nc10,c10);
addsub add10_11(a11_9,{{10{a12_9[31]}},a12_9[31:10]},nc10,b11_10);
addsub add10_12(a12_9,{{10{a11_9[31]}},a11_9[31:10]},c10,b12_10);
addsub add10_21(a21_9,{{10{a22_9[31]}},a22_9[31:10]},nc10,b21_10);
addsub add10_22(a22_9,{{10{a21_9[31]}},a21_9[31:10]},c10,b22_10);
addsub adda10_11(b11_10,{{10{b21_10[31]}},b21_10[31:10]},nc10,a11_10);
addsub adda10_12(b21_10,{{10{b11_10[31]}},b11_10[31:10]},c10,a21_10);
addsub adda10_21(b12_10,{{10{b22_10[31]}},b22_10[31:10]},nc10,a12_10);
addsub adda10_22(b22_10,{{10{b12_10[31]}},b12_10[31:10]},c10,a22_10);

addsub sub11(a22_10,a11_10,1'b1,s11);
xor g011(c11,s11[31],a21_10[31]);
not g1111(nc11,c11);
addsub add11_11(a11_10,{{11{a12_10[31]}},a12_10[31:11]},nc11,b11_11);
addsub add11_12(a12_10,{{11{a11_10[31]}},a11_10[31:11]},c11,b12_11);
addsub add11_21(a21_10,{{11{a22_10[31]}},a22_10[31:11]},nc11,b21_11);
addsub add11_22(a22_10,{{11{a21_10[31]}},a21_10[31:11]},c11,b22_11);
addsub adda11_11(b11_11,{{11{b21_11[31]}},b21_11[31:11]},nc11,a11_11);
addsub adda11_12(b21_11,{{11{b11_11[31]}},b11_11[31:11]},c11,a21_11);
addsub adda11_21(b12_11,{{11{b22_11[31]}},b22_11[31:11]},nc11,a12_11);
addsub adda11_22(b22_11,{{11{b12_11[31]}},b12_11[31:11]},c11,a22_11);
//////////////

addsub sub12(a22_11,a11_11,1'b1,s12);
xor g012(c12,s12[31],a21_11[31]);
not g1212(nc12,c12);
addsub add12_11(a11_11,{{12{a12_11[31]}},a12_11[31:12]},nc12,b11_12);
addsub add12_12(a12_11,{{12{a11_11[31]}},a11_11[31:12]},c12,b12_12);
addsub add12_21(a21_11,{{12{a22_11[31]}},a22_11[31:12]},nc12,b21_12);
addsub add12_22(a22_11,{{12{a21_11[31]}},a21_11[31:12]},c12,b22_12);
addsub adda12_11(b11_12,{{12{b21_12[31]}},b21_12[31:12]},nc12,a11_12);
addsub adda12_12(b21_12,{{12{b11_12[31]}},b11_12[31:12]},c12,a21_12);
addsub adda12_21(b12_12,{{12{b22_12[31]}},b22_12[31:12]},nc12,a12_12);
addsub adda12_22(b22_12,{{12{b12_12[31]}},b12_12[31:12]},c12,a22_12);


addsub sub13(a22_12,a11_12,1'b1,s13);
xor g013(c13,s13[31],a21_12[31]);
not g1313(nc13,c13);
addsub add13_11(a11_12,{{13{a12_12[31]}},a12_12[31:13]},nc13,b11_13);
addsub add13_12(a12_12,{{13{a11_12[31]}},a11_12[31:13]},c13,b12_13);
addsub add13_21(a21_12,{{13{a22_12[31]}},a22_12[31:13]},nc13,b21_13);
addsub add13_22(a22_12,{{13{a21_12[31]}},a21_12[31:13]},c13,b22_13);
addsub adda13_11(b11_13,{{13{b21_13[31]}},b21_13[31:13]},nc13,a11_13);
addsub adda13_12(b21_13,{{13{b11_13[31]}},b11_13[31:13]},c13,a21_13);
addsub adda13_21(b12_13,{{13{b22_13[31]}},b22_13[31:13]},nc13,a12_13);
addsub adda13_22(b22_13,{{13{b12_13[31]}},b12_13[31:13]},c13,a22_13);

addsub sub14(a22_13,a11_13,1'b1,s14);
xor g014(c14,s14[31],a21_13[31]);
not g1414(nc14,c14);
addsub add14_11(a11_13,{{14{a12_13[31]}},a12_13[31:14]},nc14,b11_14);
addsub add14_12(a12_13,{{14{a11_13[31]}},a11_13[31:14]},c14,b12_14);
addsub add14_21(a21_13,{{14{a22_13[31]}},a22_13[31:14]},nc14,b21_14);
addsub add14_22(a22_13,{{14{a21_13[31]}},a21_13[31:14]},c14,b22_14);
addsub adda14_11(b11_14,{{14{b21_14[31]}},b21_14[31:14]},nc14,a11_14);
addsub adda14_12(b21_14,{{14{b11_14[31]}},b11_14[31:14]},c14,a21_14);
addsub adda14_21(b12_14,{{14{b22_14[31]}},b22_14[31:14]},nc14,a12_14);
addsub adda14_22(b22_14,{{14{b12_14[31]}},b12_14[31:14]},c14,a22_14);


addsub sub15(a22_14,a11_14,1'b1,s15);
xor g015(c15,s15[31],a21_14[31]);
not g1515(nc15,c15);
addsub add15_11(a11_14,{{15{a12_14[31]}},a12_14[31:15]},nc15,b11_15);
addsub add15_12(a12_14,{{15{a11_14[31]}},a11_14[31:15]},c15,b12_15);
addsub add15_21(a21_14,{{15{a22_14[31]}},a22_14[31:15]},nc15,b21_15);
addsub add15_22(a22_14,{{15{a21_14[31]}},a21_14[31:15]},c15,b22_15);
addsub adda15_11(b11_15,{{15{b21_15[31]}},b21_15[31:15]},nc15,a11_15);
addsub adda15_12(b21_15,{{15{b11_15[31]}},b11_15[31:15]},c15,a21_15);
addsub adda15_21(b12_15,{{15{b22_15[31]}},b22_15[31:15]},nc15,a12_15);
addsub adda15_22(b22_15,{{15{b12_15[31]}},b12_15[31:15]},c15,a22_15);

assign control={16'b0,c15,c14,c13,c12,c11,c10,c9,c8,c7,c6,c5,c4,c3,c2,c1,c0};

wire [31:0] k11,k12,k21,k22;
wire [31:0] kk11,kk12,kk21,kk22;
wire [31:0] outa,outb,outc,outd;

scalebyk h11(a11_15,k11);scalebyk h11q(k11,outa);
scalebyk h12(a12_15,k12);scalebyk h12q(k12,outb);
scalebyk h21(a21_15,k21);scalebyk h21q(k21,outc);
scalebyk h22(a22_15,k22);scalebyk h22q(k22,outd);

register reg11(outa,out11,LD,clk,clr);       register reg12(outb,out12,LD,clk,clr);

register reg21(outc,out21,LD,clk,clr);       register reg22(outd,out22,LD,clk,clr);

endmodule


///////////////////////////////////////////////////////////////////////////////
module nondiagmergecordic(
input  [31:0] a11,a12,a21,a22,
output[31:0] out11,out12,out21,out22,
input LD,clk,clr,
input [31:0] controlq,controlw
);
wire [31:0] a11_0,a11_1,a11_2,a11_3,a11_4,a11_5,a11_6,a11_7,a11_8,a11_9,a11_10,a11_11,a11_12,a11_13,a11_14,a11_15,a11_16;
wire [31:0] a12_0,a12_1,a12_2,a12_3,a12_4,a12_5,a12_6,a12_7,a12_8,a12_9,a12_10,a12_11,a12_12,a12_13,a12_14,a12_15,a12_16;
wire [31:0] a21_0,a21_1,a21_2,a21_3,a21_4,a21_5,a21_6,a21_7,a21_8,a21_9,a21_10,a21_11,a21_12,a21_13,a21_14,a21_15,a21_16;
wire [31:0] a22_0,a22_1,a22_2,a22_3,a22_4,a22_5,a22_6,a22_7,a22_8,a22_9,a22_10,a22_11,a22_12,a22_13,a22_14,a22_15,a22_16;
wire [31:0] b11_0,b11_1,b11_2,b11_3,b11_4,b11_5,b11_6,b11_7,b11_8,b11_9,b11_10,b11_11,b11_12,b11_13,b11_14,b11_15,b11_16;
wire [31:0] b12_0,b12_1,b12_2,b12_3,b12_4,b12_5,b12_6,b12_7,b12_8,b12_9,b12_10,b12_11,b12_12,b12_13,b12_14,b12_15,b12_16;
wire [31:0] b21_0,b21_1,b21_2,b21_3,b21_4,b21_5,b21_6,b21_7,b21_8,b21_9,b21_10,b21_11,b21_12,b21_13,b21_14,b21_15,b21_16;
wire [31:0] b22_0,b22_1,b22_2,b22_3,b22_4,b22_5,b22_6,b22_7,b22_8,b22_9,b22_10,b22_11,b22_12,b22_13,b22_14,b22_15,b22_16;
wire [31:0] s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14,s15,s16;


not g00(nc0q,controlq[0]);
not g00w(nc0w,controlw[0]);
addsub add0_11(a11,a12,nc0q,b11_0);
addsub add0_12(a12,a11,controlq[0],b12_0);
addsub add0_21(a21,a22,nc0q,b21_0);
addsub add0_22(a22,a21,controlq[0],b22_0);

addsub adda0_11(b11_0,b21_0,nc0w,a11_0);
addsub adda0_12(b21_0,b11_0,controlw[0],a21_0);
addsub adda0_21(b12_0,b22_0,nc0w,a12_0);
addsub adda0_22(b22_0,b12_0,controlw[0],a22_0);


not g11(nc1q,controlq[1]);
not g11w(nc1w,controlw[1]);
addsub add1_11(a11_0,{{1{a12_0[31]}},a12_0[31:1]},nc1q,b11_1);
addsub add1_12(a12_0,{{1{a11_0[31]}},a11_0[31:1]},controlq[1],b12_1);
addsub add1_21(a21_0,{{1{a22_0[31]}},a22_0[31:1]},nc1q,b21_1);
addsub add1_22(a22_0,{{1{a21_0[31]}},a21_0[31:1]},controlq[1],b22_1);

addsub adda1_11(b11_1,{{1{b21_1[31]}},b21_1[31:1]},nc1w,a11_1);
addsub adda1_12(b21_1,{{1{b11_1[31]}},b11_1[31:1]},controlw[1],a21_1);
addsub adda1_21(b12_1,{{1{b22_1[31]}},b22_1[31:1]},nc1w,a12_1);
addsub adda1_22(b22_1,{{1{b12_1[31]}},b12_1[31:1]},controlw[1],a22_1);

not g22(nc2q,controlq[2]);
not g22w(nc2w,controlw[2]);
addsub add2_11(a11_1,{{2{a12_1[31]}},a12_1[31:2]},nc2q,b11_2);
addsub add2_12(a12_1,{{2{a11_1[31]}},a11_1[31:2]},controlq[2],b12_2);
addsub add2_21(a21_1,{{2{a22_1[31]}},a22_1[31:2]},nc2q,b21_2);
addsub add2_22(a22_1,{{2{a21_1[31]}},a21_1[31:2]},controlq[2],b22_2);

addsub adda2_11(b11_2,{{2{b21_2[31]}},b21_2[31:2]},nc2w,a11_2);
addsub adda2_12(b21_2,{{2{b11_2[31]}},b11_2[31:2]},controlw[2],a21_2);
addsub adda2_21(b12_2,{{2{b22_2[31]}},b22_2[31:2]},nc2w,a12_2);
addsub adda2_22(b22_2,{{2{b12_2[31]}},b12_2[31:2]},controlw[2],a22_2);

not g33(nc3q,controlq[3]);
not g33w(nc3w,controlw[3]);
addsub add3_11(a11_2,{{3{a12_2[31]}},a12_2[31:3]},nc3q,b11_3);
addsub add3_12(a12_2,{{3{a11_2[31]}},a11_2[31:3]},controlq[3],b12_3);
addsub add3_21(a21_2,{{3{a22_2[31]}},a22_2[31:3]},nc3q,b21_3);
addsub add3_22(a22_2,{{3{a21_2[31]}},a21_2[31:3]},controlq[3],b22_3);
addsub adda3_11(b11_3,{{3{b21_3[31]}},b21_3[31:3]},nc3w,a11_3);
addsub adda3_12(b21_3,{{3{b11_3[31]}},b11_3[31:3]},controlw[3],a21_3);
addsub adda3_21(b12_3,{{3{b22_3[31]}},b22_3[31:3]},nc3w,a12_3);
addsub adda3_22(b22_3,{{3{b12_3[31]}},b12_3[31:3]},controlw[3],a22_3);


not g44(nc4q,controlq[4]);
not g44w(nc4w,controlw[4]);
addsub add4_11(a11_3,{{4{a12_3[31]}},a12_3[31:4]},nc4q,b11_4);
addsub add4_12(a12_3,{{4{a11_3[31]}},a11_3[31:4]},controlq[4],b12_4);
addsub add4_21(a21_3,{{4{a22_3[31]}},a22_3[31:4]},nc4q,b21_4);
addsub add4_22(a22_3,{{4{a21_3[31]}},a21_3[31:4]},controlq[4],b22_4);
addsub adda4_11(b11_4,{{4{b21_4[31]}},b21_4[31:4]},nc4w,a11_4);
addsub adda4_12(b21_4,{{4{b11_4[31]}},b11_4[31:4]},controlw[4],a21_4);
addsub adda4_21(b12_4,{{4{b22_4[31]}},b22_4[31:4]},nc4w,a12_4);
addsub adda4_22(b22_4,{{4{b12_4[31]}},b12_4[31:4]},controlw[4],a22_4);

not g55(nc5q,controlq[5]);
not g55w(nc5w,controlw[5]);
addsub add5_11(a11_4,{{5{a12_4[31]}},a12_4[31:5]},nc5q,b11_5);
addsub add5_12(a12_4,{{5{a11_4[31]}},a11_4[31:5]},controlq[5],b12_5);
addsub add5_21(a21_4,{{5{a22_4[31]}},a22_4[31:5]},nc5q,b21_5);
addsub add5_22(a22_4,{{5{a21_4[31]}},a21_4[31:5]},controlq[5],b22_5);
addsub adda5_11(b11_5,{{5{b21_5[31]}},b21_5[31:5]},nc5w,a11_5);
addsub adda5_12(b21_5,{{5{b11_5[31]}},b11_5[31:5]},controlw[5],a21_5);
addsub adda5_21(b12_5,{{5{b22_5[31]}},b22_5[31:5]},nc5w,a12_5);
addsub adda5_22(b22_5,{{5{b12_5[31]}},b12_5[31:5]},controlw[5],a22_5);



not g66(nc6q,controlq[6]);
not g66w(nc6w,controlw[6]);
addsub add6_11(a11_5,{{6{a12_5[31]}},a12_5[31:6]},nc6q,b11_6);
addsub add6_12(a12_5,{{6{a11_5[31]}},a11_5[31:6]},controlq[6],b12_6);
addsub add6_21(a21_5,{{6{a22_5[31]}},a22_5[31:6]},nc6q,b21_6);
addsub add6_22(a22_5,{{6{a21_5[31]}},a21_5[31:6]},controlq[6],b22_6);
addsub adda6_11(b11_6,{{6{b21_6[31]}},b21_6[31:6]},nc6w,a11_6);
addsub adda6_12(b21_6,{{6{b11_6[31]}},b11_6[31:6]},controlw[6],a21_6);
addsub adda6_21(b12_6,{{6{b22_6[31]}},b22_6[31:6]},nc6w,a12_6);
addsub adda6_22(b22_6,{{6{b12_6[31]}},b12_6[31:6]},controlw[6],a22_6);

not g77(nc7q,controlq[7]);
not g77w(nc7w,controlw[7]);
addsub add7_11(a11_6,{{7{a12_6[31]}},a12_6[31:7]},nc7q,b11_7);
addsub add7_12(a12_6,{{7{a11_6[31]}},a11_6[31:7]},controlq[7],b12_7);
addsub add7_21(a21_6,{{7{a22_6[31]}},a22_6[31:7]},nc7q,b21_7);
addsub add7_22(a22_6,{{7{a21_6[31]}},a21_6[31:7]},controlq[7],b22_7);
addsub adda7_11(b11_7,{{7{b21_7[31]}},b21_7[31:7]},nc7w,a11_7);
addsub adda7_12(b21_7,{{7{b11_7[31]}},b11_7[31:7]},controlw[7],a21_7);
addsub adda7_21(b12_7,{{7{b22_7[31]}},b22_7[31:7]},nc7w,a12_7);
addsub adda7_22(b22_7,{{7{b12_7[31]}},b12_7[31:7]},controlw[7],a22_7);

not g88(nc8q,controlq[8]);
not g88w(nc8w,controlw[8]);
addsub add8_11(a11_7,{{8{a12_7[31]}},a12_7[31:8]},nc8q,b11_8);
addsub add8_12(a12_7,{{8{a11_7[31]}},a11_7[31:8]},controlq[8],b12_8);
addsub add8_21(a21_7,{{8{a22_7[31]}},a22_7[31:8]},nc8q,b21_8);
addsub add8_22(a22_7,{{8{a21_7[31]}},a21_7[31:8]},controlq[8],b22_8);
addsub adda8_11(b11_8,{{8{b21_8[31]}},b21_8[31:8]},nc8w,a11_8);
addsub adda8_12(b21_8,{{8{b11_8[31]}},b11_8[31:8]},controlw[8],a21_8);
addsub adda8_21(b12_8,{{8{b22_8[31]}},b22_8[31:8]},nc8w,a12_8);
addsub adda8_22(b22_8,{{8{b12_8[31]}},b12_8[31:8]},controlw[8],a22_8);

not g99(nc9q,controlq[9]);
not g99w(nc9w,controlw[9]);
addsub add9_11(a11_8,{{9{a12_8[31]}},a12_8[31:9]},nc9q,b11_9);
addsub add9_12(a12_8,{{9{a11_8[31]}},a11_8[31:9]},controlq[9],b12_9);
addsub add9_21(a21_8,{{9{a22_8[31]}},a22_8[31:9]},nc9q,b21_9);
addsub add9_22(a22_8,{{9{a21_8[31]}},a21_8[31:9]},controlq[9],b22_9);
addsub adda9_11(b11_9,{{9{b21_9[31]}},b21_9[31:9]},nc9w,a11_9);
addsub adda9_12(b21_9,{{9{b11_9[31]}},b11_9[31:9]},controlw[9],a21_9);
addsub adda9_21(b12_9,{{9{b22_9[31]}},b22_9[31:9]},nc9w,a12_9);
addsub adda9_22(b22_9,{{9{b12_9[31]}},b12_9[31:9]},controlw[9],a22_9);

not g1010(nc10q,controlq[10]);
not g1010w(nc10w,controlw[10]);
addsub add10_11(a11_9,{{10{a12_9[31]}},a12_9[31:10]},nc10q,b11_10);
addsub add10_12(a12_9,{{10{a11_9[31]}},a11_9[31:10]},controlq[10],b12_10);
addsub add10_21(a21_9,{{10{a22_9[31]}},a22_9[31:10]},nc10q,b21_10);
addsub add10_22(a22_9,{{10{a21_9[31]}},a21_9[31:10]},controlq[10],b22_10);
addsub adda10_11(b11_10,{{10{b21_10[31]}},b21_10[31:10]},nc10w,a11_10);
addsub adda10_12(b21_10,{{10{b11_10[31]}},b11_10[31:10]},controlw[10],a21_10);
addsub adda10_21(b12_10,{{10{b22_10[31]}},b22_10[31:10]},nc10w,a12_10);
addsub adda10_22(b22_10,{{10{b12_10[31]}},b12_10[31:10]},controlw[10],a22_10);

not g1111(nc11q,controlq[11]);
not g1111w(nc11w,controlw[11]);
addsub add11_11(a11_10,{{11{a12_10[31]}},a12_10[31:11]},nc11q,b11_11);
addsub add11_12(a12_10,{{11{a11_10[31]}},a11_10[31:11]},controlq[11],b12_11);
addsub add11_21(a21_10,{{11{a22_10[31]}},a22_10[31:11]},nc11q,b21_11);
addsub add11_22(a22_10,{{11{a21_10[31]}},a21_10[31:11]},controlq[11],b22_11);
addsub adda11_11(b11_11,{{11{b21_11[31]}},b21_11[31:11]},nc11w,a11_11);
addsub adda11_12(b21_11,{{11{b11_11[31]}},b11_11[31:11]},controlw[11],a21_11);
addsub adda11_21(b12_11,{{11{b22_11[31]}},b22_11[31:11]},nc11w,a12_11);
addsub adda11_22(b22_11,{{11{b12_11[31]}},b12_11[31:11]},controlw[11],a22_11);

//////////////

not g1212(nc12q,controlq[12]);
not g1212w(nc12w,controlw[12]);
addsub add12_11(a11_11,{{12{a12_11[31]}},a12_11[31:12]},nc12q,b11_12);
addsub add12_12(a12_11,{{12{a11_11[31]}},a11_11[31:12]},controlq[12],b12_12);
addsub add12_21(a21_11,{{12{a22_11[31]}},a22_11[31:12]},nc12q,b21_12);
addsub add12_22(a22_11,{{12{a21_11[31]}},a21_11[31:12]},controlq[12],b22_12);
addsub adda12_11(b11_12,{{12{b21_12[31]}},b21_12[31:12]},nc12w,a11_12);
addsub adda12_12(b21_12,{{12{b11_12[31]}},b11_12[31:12]},controlw[12],a21_12);
addsub adda12_21(b12_12,{{12{b22_12[31]}},b22_12[31:12]},nc12w,a12_12);
addsub adda12_22(b22_12,{{12{b12_12[31]}},b12_12[31:12]},controlw[12],a22_12);


not g1313(nc13q,controlq[13]);
not g1313w(nc13w,controlw[13]);
addsub add13_11(a11_12,{{13{a12_12[31]}},a12_12[31:13]},nc13q,b11_13);
addsub add13_12(a12_12,{{13{a11_12[31]}},a11_12[31:13]},controlq[13],b12_13);
addsub add13_21(a21_12,{{13{a22_12[31]}},a22_12[31:13]},nc13q,b21_13);
addsub add13_22(a22_12,{{13{a21_12[31]}},a21_12[31:13]},controlq[13],b22_13);
addsub adda13_11(b11_13,{{13{b21_13[31]}},b21_13[31:13]},nc13w,a11_13);
addsub adda13_12(b21_13,{{13{b11_13[31]}},b11_13[31:13]},controlw[13],a21_13);
addsub adda13_21(b12_13,{{13{b22_13[31]}},b22_13[31:13]},nc13w,a12_13);
addsub adda13_22(b22_13,{{13{b12_13[31]}},b12_13[31:13]},controlw[13],a22_13);

not g1414(nc14q,controlq[14]);
not g1414w(nc14w,controlw[14]);
addsub add14_11(a11_13,{{14{a12_13[31]}},a12_13[31:14]},nc14q,b11_14);
addsub add14_12(a12_13,{{14{a11_13[31]}},a11_13[31:14]},controlq[14],b12_14);
addsub add14_21(a21_13,{{14{a22_13[31]}},a22_13[31:14]},nc14q,b21_14);
addsub add14_22(a22_13,{{14{a21_13[31]}},a21_13[31:14]},controlq[14],b22_14);
addsub adda14_11(b11_14,{{14{b21_14[31]}},b21_14[31:14]},nc14w,a11_14);
addsub adda14_12(b21_14,{{14{b11_14[31]}},b11_14[31:14]},controlw[14],a21_14);
addsub adda14_21(b12_14,{{14{b22_14[31]}},b22_14[31:14]},nc14w,a12_14);
addsub adda14_22(b22_14,{{14{b12_14[31]}},b12_14[31:14]},controlw[14],a22_14);


not g1515(nc15q,controlq[15]);
not g1515w(nc15w,controlw[15]);
addsub add15_11(a11_14,{{15{a12_14[31]}},a12_14[31:15]},nc15q,b11_15);
addsub add15_12(a12_14,{{15{a11_14[31]}},a11_14[31:15]},controlq[15],b12_15);
addsub add15_21(a21_14,{{15{a22_14[31]}},a22_14[31:15]},nc15q,b21_15);
addsub add15_22(a22_14,{{15{a21_14[31]}},a21_14[31:15]},controlq[15],b22_15);
addsub adda15_11(b11_15,{{15{b21_15[31]}},b21_15[31:15]},nc15w,a11_15);
addsub adda15_12(b21_15,{{15{b11_15[31]}},b11_15[31:15]},controlw[15],a21_15);
addsub adda15_21(b12_15,{{15{b22_15[31]}},b22_15[31:15]},nc15w,a12_15);
addsub adda15_22(b22_15,{{15{b12_15[31]}},b12_15[31:15]},controlw[15],a22_15);

wire [31:0] k11,k12,k21,k22;
wire [31:0] kk11,kk12,kk21,kk22;
wire [31:0] outa,outb,outc,outd;

scalebyk h11(a11_15,k11);scalebyk h11q(k11,outa);
scalebyk h12(a12_15,k12);scalebyk h12q(k12,outb);
scalebyk h21(a21_15,k21);scalebyk h21q(k21,outc);
scalebyk h22(a22_15,k22);scalebyk h22q(k22,outd);

register reg11(outa,out11,LD,clk,clr);       register reg12(outb,out12,LD,clk,clr);

register reg21(outc,out21,LD,clk,clr);       register reg22(outd,out22,LD,clk,clr);
endmodule
